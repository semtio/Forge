# Установка генератора

Этот файл поможет установить генератор на домашний компьютер, даже если у вас никогда не было ни PHP, ни XAMPP/OSPanel и т.п. Сделаем всё максимально просто. Выберите свою систему и следуйте шагам.

---

## macOS (MacBook/iMac)

Мы поставим одну программу — PHP — и запустим генерацию сайта. Всё делается через стандартное приложение «Терминал».

### Что будем делать
- Установим менеджер пакетов Homebrew (если его ещё нет)
- Установим PHP
- Запустим генератор
- Откроем сайт в браузере

### Шаги
1) Откройте «Терминал» (нажмите Command + пробел, введите Terminal, нажмите Enter).

2) Установите Homebrew (если он ещё не установлен). Скопируйте команду ниже целиком и нажмите Enter:
```
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```
Во время установки следуйте подсказкам на экране. Если Homebrew уже стоит, просто переходите к следующему пункту.

3) Установите PHP:
```
brew install php
```

4) Проверьте, что PHP установился:
```
php -v
```
Если видите строку вроде "PHP 8.x.x" — всё хорошо.

5) Откройте в Терминале папку с вашим проектом (замените путь на ваш реальный путь к папке):
```
cd /Путь/к/вашей/папке/Phorge/public
```

6) Запустите генератор (он соберёт сайты в папке `build`):
```
php ./generator/cli.php --clean
```
Если всё ок — увидите сообщения о генерации. При первом запуске создастся пароль для админки TinyMCE: `admin`.

7) Запустите локальный сервер, чтобы посмотреть сайт в браузере. Замените ВАШ_ДОМЕН на папку вашего сайта в `build` (например, `squidgamebler.org`):
```
php -S localhost:8000 -t ./build/ВАШ_ДОМЕН
```

8) Откройте в браузере:
```
http://localhost:8000/
```

9) Админка TinyMCE находится тут:
```
http://localhost:8000/plugins/tinymce/admin/
```
Логин по паролю: просто введите пароль `admin` (его можно сменить позже, см. примечания ниже).

---

## Windows (чистая система)

Мы поставим только PHP через стандартный магазин приложений и запустим проект.

### Что будем делать
- Установим PHP через winget
- Проверим установку
- Запустим генератор
- Откроем сайт в браузере

### Шаги
1) Откройте PowerShell (Пуск → введите "PowerShell"). Рекомендуется открыть "Windows PowerShell".

2) Установите PHP одной командой:
```
winget install --id PHP.PHP -e
```
Если попросит согласиться — соглашайтесь. По окончании закройте и снова откройте PowerShell.

(Иногда для некоторых сборок PHP может понадобиться пакет Visual C++ — если вдруг будут ошибки запуска PHP, установите дополнительно:)
```
winget install --id Microsoft.VCRedist.2015+.x64 -e
```

3) Проверьте, что PHP установлен:
```
php -v
```
Должна появиться версия PHP ("PHP 8.x")

4) Перейдите в папку проекта (замените путь на ваш):
```
cd C:\OSPanel\home\phorge2.local\public
```

5) Запустите генератор (он соберёт сайты в папке `build`):
```
php .\generator\cli.php --clean
```
Если всё ок — увидите сообщения о генерации. При первом запуске создастся пароль для админки TinyMCE: `admin`.

6) Запустите локальный сервер, чтобы посмотреть сайт в браузере. Замените ВАШ_ДОМЕН на папку вашего сайта в `build` (например, `squidgamebler.org`):
```
php -S localhost:8000 -t .\build\ВАШ_ДОМЕН
```

7) Откройте в браузере:
```
http://localhost:8000/
```

8) Админка TinyMCE находится тут:
```
http://localhost:8000/plugins/tinymce/admin/
```
Пароль по умолчанию: `admin` (как сменить — ниже).

---

## Полезные примечания (оба варианта)

- Если кнопка «Update from GitHub» в админке не работает, скорее всего не хватает модулей PHP для скачивания и распаковки архива. Обычно всё уже включено, но если что-то не получается:
  - Должны быть доступны: `curl`, `openssl`, `zip` (модуль ZipArchive)
  - На macOS через Homebrew это обычно уже есть «из коробки».
  - На Windows через winget тоже как правило всё готово. Если вдруг нет — понадобится отредактировать `php.ini` (это файл настроек PHP) и включить эти расширения. Если не знаете как — напишите, помогу включить.

- Как сменить пароль админки TinyMCE (просто):
  1) После первой генерации зайдите в папку вашего сайта: `build/ВАШ_ДОМЕН/plugins/tinymce/admin/`
  2) Откройте файл `admin.key` обычным блокнотом — там лежит длинная строка (это «хэш» пароля)
  3) Создайте новый хэш для своего пароля командой (замените `МОЙ_ПАРОЛЬ` на свой):
     - macOS:
       ```
       php -r "echo password_hash('МОЙ_ПАРОЛЬ', PASSWORD_DEFAULT);"
       ```
     - Windows PowerShell:
       ```
       php -r "echo password_hash('МОЙ_ПАРОЛЬ', PASSWORD_DEFAULT);"
       ```
  4) Скопируйте получившуюся длинную строку и полностью замените ей содержимое `admin.key`.
  5) Сохраните файл — теперь новый пароль активен.

- Если порт 8000 занят (страница не открывается), попробуйте другой порт, например 8080:
  - macOS:
    ```
    php -S localhost:8080 -t ./build/ВАШ_ДОМЕН
    ```
  - Windows:
    ```
    php -S localhost:8080 -t .\build\ВАШ_ДОМЕН
    ```

- Где смотреть собранные сайты: в папке `build/`. Внутри будет папка(и) с вашим доменом (например, `squidgamebler.org`). Именно её мы и «отдаём» через локальный сервер.


